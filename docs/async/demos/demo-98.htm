<html><head>
<style>
#messages > p { margin-top : 0 ; margin-bottom : 0 }
</style>
</head><body>
<div class="remove-if-hosted"><h1>Demo 1</h1>
</div>
<p><button id="startButton">Start</button></p>
<div id="messages"></div>
<script class="module">
function wait ( duration, number ) {
	return new Promise (( resolve, reject ) => {
		setTimeout (( ) => {
			if ( duration <= 2000 ) resolve( `Promise ${number} succeeded after ${Math.round(duration)} milliseconds.` );
			else reject( `Promise ${number} failed, maximum runtime exceeded by ${Math.round(duration) - 2000} milliseconds.` );
			} , duration );
		} );
	}
function addMessage( msg ) { 
	const p = document.createElement( "P" );
	p.innerText = msg;
	messages.append( p );
	}
startButton.addEventListener( "click" , ( ) => {
	messages.innerHTML = "" ;
	for ( let i = 0 ; i < 10 ; i  ++ ) {
		wait( Math.random( ) * 4000, i )
		.then( message => addMessage( message ))
		.catch( reason => addMessage( reason ))
		.finally(( ) => addMessage( "Done!" ));
		}
	} ) ;
</script>
</body></html>